(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{658:function(e,t,n){e.exports=n(659)},659:function(e,t,n){var s=n(32),a=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},737:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},738:function(e,t,n){var s=n(739);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),s(e,a.key,a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),s(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},739:function(e,t,n){e.exports=n(383)},743:function(e,t,n){"use strict";n.r(t);var s=n(737),a=n.n(s),o=n(738),r=n.n(o),i=n(658),u=n.n(i);var l=function(){function e(t){if(a()(this,e),"string"!=typeof t||!t.trim())throw new Error("name must be a string value");this.name=t,this._init()}return r()(e,[{key:"_isMessage",value:function(e){return e===this.key}},{key:"_init",value:function(){var e=this;this.key="".concat("__BROADCAST_CHANNEL_").concat(this.name),this.messageHandlers=[],this.storageHandler=function(t){var n=t.key;!e._isMessage(n)||(t=t.newValue)&&(e._notify(JSON.parse(t)),localStorage.removeItem(e.key))},window.addEventListener("storage",this.storageHandler),this.destroyed=!1}},{key:"_notify",value:function(e){var t=this;this.messageHandlers.forEach((function(n){n.call(t,e)}))}},{key:"postMessage",value:function(e){if(this.destroyed)throw new Error("channel has been destroyed!");return e=function(e){return{timestamp:+new Date,data:e}}(e),localStorage.setItem(this.key,u()(e)),e}},{key:"onMessage",value:function(e){e&&"function"==typeof e&&this.messageHandlers.push(e)}},{key:"destroy",value:function(){window.removeEventListener("storage",this.storageHandler),this.destroyed=!0}}]),e}(),c=n(140),p={setup(e,t){const n=Object(c.e)(!1),s=Object(c.e)("");let a=null;return Object(c.c)(()=>{a=new l("test"),n.value=!!window.opener,n.value&&a.onMessage(e=>{s.value=e.data})}),{isNewTab:n,message:s,openNewTab:()=>{window.open(location.href)},send:()=>{a.postMessage(s.value)}}}},f=n(21),v=Object(f.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isNewTab?n("div",[n("p",[e._v(e._s(e.message?"接收到消息：":"等待接收消息："))]),e._v(" "),n("div",[e._v("\n      "+e._s(e.message)+"\n    ")])]):n("div",[n("p",[n("a-button",{attrs:{type:"link"},on:{click:e.openNewTab}},[e._v("打开一个新的页面")])],1),e._v(" "),n("a-input",{attrs:{type:"textarea","auto-size":{minRows:5}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.send}},[e._v("发送")])],1)],1)])}),[],!1,null,null,null);t.default=v.exports}}]);